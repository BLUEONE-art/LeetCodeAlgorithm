//ä¸­ä½æ•°æ˜¯æœ‰åºåˆ—è¡¨ä¸­é—´çš„æ•°ã€‚å¦‚æœåˆ—è¡¨é•¿åº¦æ˜¯å¶æ•°ï¼Œä¸­ä½æ•°åˆ™æ˜¯ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚ 
//
// ä¾‹å¦‚ï¼Œ 
//
// [2,3,4] çš„ä¸­ä½æ•°æ˜¯ 3 
//
// [2,3] çš„ä¸­ä½æ•°æ˜¯ (2 + 3) / 2 = 2.5 
//
// è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š 
//
// 
// void addNum(int num) - ä»æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°åˆ°æ•°æ®ç»“æ„ä¸­ã€‚ 
// double findMedian() - è¿”å›ç›®å‰æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚ 
// 
//
// ç¤ºä¾‹ï¼š 
//
// addNum(1)
//addNum(2)
//findMedian() -> 1.5
//addNum(3) 
//findMedian() -> 2 
//
// è¿›é˜¶: 
//
// 
// å¦‚æœæ•°æ®æµä¸­æ‰€æœ‰æ•´æ•°éƒ½åœ¨ 0 åˆ° 100 èŒƒå›´å†…ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ 
// å¦‚æœæ•°æ®æµä¸­ 99% çš„æ•´æ•°éƒ½åœ¨ 0 åˆ° 100 èŒƒå›´å†…ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ 
// 
// Related Topics å † è®¾è®¡ 
// ğŸ‘ 332 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class MedianFinder {

    /** initialize your data structure here. */
    // æ±‚ä¸­ä½æ•°å¯ä»¥å°†å…ƒç´ è¿›è¡Œæ’åºæ±‚ä¸­é—´å…ƒç´ (åˆ†å¥‡å¶è®¨è®º)
    // å¯ä»¥æŠŠæ’åºå¥½çš„æ•°çœ‹æˆä¸€ä¸ªå¤§é¡¶å †(å€’ä¸‰è§’)ï¼Œä»ä¸­é—´ä¸€åˆ†ä¸ºäºŒ
    // ç¬¬ä¸€éƒ¨åˆ†ï¼šä»æ˜¯å€’ä¸‰è§’ï¼Œå³å¤§é¡¶å †
    // ç¬¬äºŒéƒ¨åˆ†ï¼šæˆäº†ä¸€ä¸ªæ¢¯å½¢ï¼Œå³å°é¡¶å †
    // å¤§é¡¶å †é¡¶éƒ¨å…ƒç´  < å°é¡¶å †é¡¶éƒ¨å…ƒç´ 
    // â‘ å½“è¾“å…¥æ•°æ®ä¸ºå¥‡æ•°æ—¶ï¼Œä¸­ä½æ•°å°±æ˜¯å…ƒç´ å¤šçš„é‚£ä¸ªå †çš„é¡¶éƒ¨å…ƒç´ 
    // â‘¡å½“è¾“å…¥æ•°æ®ä¸ºå¶æ•°æ—¶ï¼Œä¸­ä½æ•°å°±æ˜¯ä¸¤ä¸ªå †çš„é¡¶éƒ¨å…ƒç´ ä¹‹å’Œ/2
    private PriorityQueue<Integer> small;
    private PriorityQueue<Integer> large;
    public MedianFinder() {
        // åˆå§‹åŒ–å°é¡¶å †
        small = new PriorityQueue<>();
        // åˆå§‹åŒ–å¤§é¡¶å †
        large = new PriorityQueue<>((a, b) -> {
            return b - a;
        });
    }

    /* å‘å †ä¸­æ·»åŠ å…ƒç´  */
    // æ ¸å¿ƒæ€æƒ³ï¼šä¿æŒä¸¤å †å…ƒç´ ä¸ªæ•°åªå·®ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å§‹ç»ˆä¿æŒå¤§é¡¶å †å †é¡¶å…ƒç´ å°äºå°é¡¶å †å †é¡¶å…ƒç´ 
    public void addNum(int num) {

        if (small.size() >= large.size()) {
            // æŒ‰é“ç†è¯´æ­¤æ—¶æ–°åŠ å…ƒç´ è¦åŠ åˆ°å¤§é¡¶å †ä¸­
            // ä½†å…ˆæŠŠè¦æ·»åŠ çš„å…ƒç´ åŠ åˆ°å°é¡¶å †ä¸­è¿›è¡Œæ’åºå
            // å°†æ’åºå¥½çš„å †é¡¶å…ƒç´ (å¤§é¡¶å †ä¸­çš„æœ€å¤§å…ƒç´ )åŠ åˆ°å°é¡¶å †ä¸­
            // ä¿æŒå¤§é¡¶å †é¡¶éƒ¨å…ƒç´  < å°é¡¶å †é¡¶éƒ¨å…ƒç´ 
            small.offer(num);
            large.offer(small.poll());
        } else {
            large.offer(num);
            small.offer(large.poll());
        }
    }

    /* å¯»æ‰¾ä¸­ä½æ•° */
    // æ ¸å¿ƒæ€æƒ³ï¼šä½¿å¤§é¡¶å †å’Œå°é¡¶å †å…ƒç´ ä¸ªæ•°ç›¸å·®ä¸è¶…è¿‡ 1
    public double findMedian() {

        // å¦‚æœä¸¤ä¸ªå †å…ƒç´ ä¸ç›¸åŒï¼Œåˆ™å…ƒç´ å¤šçš„å †çš„é¡¶éƒ¨å…ƒç´ å¿…æ˜¯ä¸­ä½æ•°
        if (small.size() > large.size()) {
            return small.peek();
        } else if (large.size() > small.size()){
            return large.peek();
        }

        // ä¸¤ä¸ªå †å…ƒç´ ç›¸ç­‰
        return (small.peek() + large.peek()) / 2.0;
    }
}

/**
 * Your MedianFinder object will be instantiated and called as such:
 * MedianFinder obj = new MedianFinder();
 * obj.addNum(num);
 * double param_2 = obj.findMedian();
 */
//leetcode submit region end(Prohibit modification and deletion)
